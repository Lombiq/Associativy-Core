@{
    Script.Require("Dracula").AtHead();
    var nodes = Model.Nodes as List<string>;
    var edges = Model.Edges as List<Associativy.ViewModels.GraphEdgeViewModel>;
}

@*TODO: VALAMIT KITALÁLNI AZ ÉKEZETES KARAKTEREKRE, MERT ENCODING KELL (XSS)*@
<script type="text/javascript">
$(document).ready(function(){
	var g = new Graph();

    @foreach (var node in nodes)
    {
        @: g.addNode("@Html.Raw(node)"); @*Without Html.Raw() the output would be encoded, non-ASCII characters too*@
    }

    @foreach (var edge in edges)
    {
        @: g.addEdge("@Html.Raw(edge.SourceLabel)", "@Html.Raw(edge.TargetLabel)");
    }
	
	var layouter = new Graph.Layout.Spring(g);
	layouter.layout();
	 
	var renderer = new Graph.Renderer.Raphael('canvas', g, 900, 1000);
	renderer.draw();
});
</script>
<div id="canvas">
</div>
